<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
</head>
<body>
 
<div class="container">
 
    <div class="py-5 text-center">
        <h2>ìƒí’ˆ ë“±ë¡</h2>
    </div>
 
    <form th:action method="post" enctype="multipart/form-data">
        <ul>
            <li>ìƒí’ˆëª… <input type="text" name="itemName"></li>
            <li>ì²¨ë¶€íŒŒì¼<input type="file" name="attachFile" ></li>
            <li>ì´ë¯¸ì§€ íŒŒì¼ë“¤<input type="file" multiple="multiple" name="imageFiles" ></li>
        </ul>
        <input type="submit"/>
    </form>
 
</div>
 <!-- /container -->
<input type="file" id="fileUpload" />
</body>
</html>
<style>
@Component
public class FileStore {
 
  @Value("${file.dir}")
  private String fileDir;
 
  public String getFullPath(String filename) {
    return fileDir + filename;
  }
 
  public UploadFile storeFile(MultipartFile multipartFile) throws IOException {
    if (multipartFile.isEmpty()) {
      return null;
    }
 
    String originalFilename = multipartFile.getOriginalFilename();
 
    //image.png -> uuid... .png, í™•ì¥ìë¥¼ ê°–ë„ë¡ í•˜ì—¬ ì´ë¯¸ì§€ íŒŒì¼ì´ êµ¬ë¶„ë˜ë„ë¡ í•œë‹¤.
    String storeFileName = createStoreFileName(originalFilename);
 
    multipartFile.transferTo(new File(getFullPath(storeFileName)));
 
    return new UploadFile(originalFilename, storeFileName);
 
  }
 
  public List<UploadFile> storeFiles(List<MultipartFile> multipartFiles) throws IOException {
    ArrayList<UploadFile> storeFileResult = new ArrayList<>();
    for (MultipartFile multipartFile : multipartFiles) {
      if (!multipartFile.isEmpty()) {
        storeFileResult.add(storeFile(multipartFile));
      }
    }
    return storeFileResult;
  }
 
  private String createStoreFileName(String originalFilename) {
    String uuid = UUID.randomUUID().toString();
    String ext = extractExt(originalFilename);
    return uuid + "." + ext;
  }
 
  private String extractExt(String originalFilename) {
    int index = originalFilename.lastIndexOf(".");
    return originalFilename.substring(index + 1);
  }
}


var cssId = 'myCss';  // you could encode the css path itself to generate id..
if (!document.getElementById(cssId))
{
    var head  = document.getElementsByTagName('head')[0];
    var link  = document.createElement('link');
    link.id   = cssId;
    link.rel  = 'stylesheet';
    link.type = 'text/css';
    link.href = 'http://website.example/css/stylesheet.css';
    link.media = 'all';
    head.appendChild(link);
}
</style>
<script>
 ğŸ›  pure javascript
document.querySelector('#fileUpload').change() => {
  var sFormData = new FormData();
  sFile = document.querySelector('#fileUpload')[0].files[0];
  sFormData.append('file', sFile);
  // ë¡œì§ ì‘ì„±
}


// ğŸ›  Jquery
$('#fileUpload').change(() => {
  var sFormData = new FormData();
  sFile = $('#fileUpload')[0].files[0];
  sFormData.append('file', sFile);
  // ë¡œì§ ì‘ì„±
document.querySelector('#fileUpload').change() => {
  var sFormData = new FormData();
  sFile = document.querySelector('#fileUpload')[0].files[0];
  sFormData.append('file', sFile);
  // ë¡œì§ ì‘ì„±
  
  document.querySelector('.fileUpload').value =''; // ğŸ‘ˆ input ì´ˆê¸°í™”
}


// ğŸ›  Jquery
$('#fileUpload').change(() => {
  var sFormData = new FormData();
  sFile = $('#fileUpload')[0].files[0];
  sFormData.append('file', sFile);
  // ë¡œì§ ì‘ì„±
  
  $('.fileUpload').value =''; // ğŸ‘ˆ input ì´ˆê¸°í™”
})


const objectURL = window.URL.createObjectURL(fileObj);

</script>
